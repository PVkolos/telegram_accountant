# Telegram бухгалтер
Telegram Accountant (бухгалтер в телеграме) - это проект, предназначенный для автоматизации учета расходов и доходов в Telegram. Он позволяет пользователям отслеживать свои финансы непосредственно через Telegram-бота, обеспечивая удобный и быстрый способ управления бюджетом.
### Предыстория
Бот был написан мной в 2021-2022 годах по заказу товарища. Был использован aiogram2. Сейчас, в поисках работы,
я решил переписать бота на новую версию фреймворка. Была проделана колоссальная работа по структуризации проекта - раньше бот был написан в двух файлах. Функциональная часть взаимодействия с tg api в одном, взаимодействие с google sheets api - в другом. 
Пришлось много чего переписывать, разбивать на модули, на функции. Часть функционала так и не была полностью восстановлена (например, обработка голосовых сообщений), т.к. с тех пор слишком многое изменилось в том же ffmpeg, и, чтобы разобраться в этом снова, 
требовалось бы потратить много времени. Было принято решение упустить этот функционал с целью экономии времени. Часть логики не было подправлено. Можно найти функции с большими блоками кода, которые, теоретически, было бы правильно разбить.

### Функциональность
- **Учет расходов и доходов:** Простая и интуитивно понятная система для ввода транзакций.
- **Категоризация:** Возможность классифицировать транзакции по разделам (например, "Расходы по обязательствам", "Доходы", "Желания" и т.д.), категориям (в каждом разделе неограниченное количество категорий - зарплата, подарки, жкх ...) и ключевым словам (у каждой категории - неограниченное количество ключевых слов - первая работа, зп, свет ...).
- **Отчеты и аналитика:** Генерация отчетов о расходах и доходах за определенные периоды времени отдельно по каждому пользователю гугл таблицы, затем - смежный результат. 
- **Визуализация (планируется):** Представление данных в виде графиков и диаграмм для более наглядного анализа.
- **Многопользовательская поддержка:** Возможность пользования одной таблицей неограниченного количества людей (например, для семейного бюджета).
- **Две таблицы на пользователя:** Поддержка работы с двумя таблицами одним аккаунтом телеграма (например, одна таблица - семейный бюджет, вторая - бюджет предприятия)
- **Опциональность ввода:** Различный ввод записей будет понятен боту, он сможет провести обработку.

### Технологии
-  Python: Язык программирования для разработки бота.
-  Aiogram: Python-библиотека для создания асинхронных Telegram ботов.
-  SQLite: Для хранения данных о пользователях.
-  FFmpeg: Используется для обработки аудио сообщений (требует доработки).

## Запуск
### Предварительно
- Проект был переписан на python 3.10. Корректная работа всех модулей проекта на других версиях python не гарантируется
- Создайте телеграм бота в [BotFather](https://telegram.me/s/BotFther), скопируйте его API ключ вставьте его в значение переменной BOT_API в файле GLOBAL.py
- Создайте файл credentials.json. Перейдите по ссылке в [Google Claude](https://developers.google.com/workspace/guides/create-project?hl=ru), введите данные и получите файл. Если будет спрашивать "Метод аутентификации" - берите "Сервисный аккаунт"

### Настройка проекта (windows)
- Клонируйте репозиторий на локальный сервер и войдите 
- Рекомендую создать виртуальное окружение в проекте
- Установите зависимости командой `pip install -r requirements.txt`
- Закиньте файл credentials.json в каталог 'src' вместо того, что лежит там уже
- Финальный аккорд - `python src/main.py`

### Работа с проектом
Для начала, задайте таблицу гугл, в которой бот будет производить записи - команда /set_table. Остальное найдете в /help

### Примечание
Если у вас не получилось запустить бота, посмотрите его работу [здесь](https://telegram.me/s/manager_finance_bot), это он (@manager_finance_bot)
